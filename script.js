const trenutnaSlika=document.querySelector(".trenutna-slika"),prethodniDugme=document.getElementById("prethodniBtn"),sledeciDugme=document.getElementById("sledeciBtn"),slike=["pijace slike/liman.jpg","pijace slike/futoska.jpg","pijace slike/detelinara.jpg"];let trenutniIndeksSlike=0;function prikaziSledecuSliku(){++trenutniIndeksSlike>=slike.length&&(trenutniIndeksSlike=0),azurirajSliku()}function prikaziPrethodnuSliku(){--trenutniIndeksSlike<0&&(trenutniIndeksSlike=slike.length-1),azurirajSliku()}function azurirajSliku(){trenutnaSlika.src=slike[trenutniIndeksSlike]}prethodniDugme.addEventListener("click",prikaziPrethodnuSliku),sledeciDugme.addEventListener("click",prikaziSledecuSliku);const proizvodi=[{id:1,ime:"Jabuke",cena:90,kategorija:"Voće",slika:"proizvodi/jabuke.jpg",jedinica:"kg"},{id:2,ime:"Banane",cena:150,kategorija:"Voće",slika:"proizvodi/banane.jpg",jedinica:"kg"},{id:3,ime:"Paradajz",cena:200,kategorija:"Povrće",slika:"proizvodi/paradajz.jpg",jedinica:"kg"},{id:4,ime:"Krastavci",cena:70,kategorija:"Povrće",slika:"proizvodi/krastavac.jpg",jedinica:"kom"},{id:5,ime:"Krompir",cena:100,kategorija:"Povrće",slika:"proizvodi/krompir.jpg",jedinica:"kg"},{id:6,ime:"Luk",cena:220,kategorija:"Povrće",slika:"proizvodi/luk.jpg",jedinica:"kg"},{id:7,ime:"Paprika",cena:100,kategorija:"Povrće",slika:"proizvodi/paprika.jpg",jedinica:"kg"},{id:8,ime:"Ljuta paprika",cena:60,kategorija:"Povrće",slika:"proizvodi/ljuta paprika.jpg",jedinica:"kom"},{id:9,ime:"Jaja",cena:15,kategorija:"Hrana",slika:"proizvodi/jaja.jpg",jedinica:"kom"},{id:10,ime:"Jagode",cena:250,kategorija:"Voće",slika:"proizvodi/jagode.jpg",jedinica:"kg"},{id:11,ime:"Limun",cena:60,kategorija:"Voće",slika:"proizvodi/limun.jpg",jedinica:"kg"},{id:12,ime:"Groždje",cena:200,kategorija:"Voće",slika:"proizvodi/grozdje.jpg",jedinica:"kg"},{id:13,ime:"Kajmak",cena:900,kategorija:"Mlečni proizvodi",slika:"proizvodi/kajmak.jpg",jedinica:"kg"},{id:14,ime:"Sir",cena:700,kategorija:"Mlečni proizvodi",slika:"proizvodi/sir.jpg",jedinica:"kg"},{id:15,ime:"KObasica",cena:1100,kategorija:"Hrana",slika:"proizvodi/kobasica.jpg",jedinica:"kg"},{id:16,ime:"Slanina",cena:850,kategorija:"Hrana",slika:"proizvodi/slanina.jpg",jedinica:"kg"}];function prikaziProizvode(){let e=document.getElementById("proizvodi");e.innerHTML="";for(let i=0;i<proizvodi.length;i++){let a=proizvodi[i],t=document.createElement("div");t.classList.add("proizvodi-kartica"),t.innerHTML=`
            <img src="${a.slika}" alt="${a.ime}">
            <h3>${a.ime}</h3>
            <p>Cena: ${a.cena.toFixed(2)} din/${a.jedinica}</p>
            <p>Kategorija: ${a.kategorija}</p>
            <label for="kolicina-${a.id}">Količina:</label>
            <input type="number" id="kolicina-${a.id}" min="1" value="1">
            <span>${a.jedinica}</span>
            <button onclick="dodajUKorpu(${a.id})">Dodaj u korpu</button>
            <button onclick="ukloniIzKorpe(${a.id})">Ukloni</button>
        `,e.appendChild(t)}}function sortirajProizvode(){var e,i=document.getElementById("kriterijum-sortiranja").value;"ime"===i?e=(e,i)=>e.ime.localeCompare(i.ime):"cena"===i?e=(e,i)=>e.cena-i.cena:"kategorija"===i&&(e=(e,i)=>e.kategorija.localeCompare(i.kategorija)),proizvodi.sort(e),prikaziProizvode()}function ukloniIzKorpe(e){let i=proizvodi.find(i=>i.id===e);if(i){let a=document.getElementById(`kolicina-${e}`),t=parseInt(a.value);if(t>0){let n=document.getElementById("stavke-korpe"),o=n.querySelector(`li[data-proizvod-id="${e}"]`);if(o){n.removeChild(o);let r=document.getElementById("ukupna-cena");r.textContent=(parseFloat(r.textContent)-i.cena*t).toFixed(2)}}}}function dodajUKorpu(e){let i=proizvodi.find(i=>i.id===e);if(i){let a=document.getElementById(`kolicina-${e}`),t=parseInt(a.value);if(t>0){let n=document.getElementById("stavke-korpe"),o=document.createElement("li");o.setAttribute("data-proizvod-id",e),o.textContent=`${i.ime} x ${t} ${i.jedinica} - ${(i.cena*t).toFixed(2)} din`,n.appendChild(o);let r=document.getElementById("ukupna-cena");r.textContent=(parseFloat(r.textContent)+i.cena*t).toFixed(2)}}}function kupovina(){let e=document.getElementById("stavke-korpe");e.innerHTML="";let i=document.getElementById("ukupna-cena");i.textContent="0.00";let a=document.getElementById("poruka-korpa");a.innerText="Hvala na kupovini.",a.style.display="block",setTimeout(function(){a.style.display="none"},2e3)}function proveriEmail(e){return!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||(document.getElementById("poruka").innerText="Unesite validnu email adresu.",document.getElementById("poruka").style.display="block",!1)}function proveriBrojTelefona(e){return!!/^\d{10}$/.test(e)||(document.getElementById("poruka").innerText="Broj telefona mora sadržati 10 cifara.",document.getElementById("poruka").style.display="block",!1)}function proveriLozinku(e){return e.length<8?(document.getElementById("poruka").innerText="Lozinka mora sadržati najmanje 8 karaktera.",document.getElementById("poruka").style.display="block",!1):/[a-z]/.test(e)?/[A-Z]/.test(e)?!!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e)||(document.getElementById("poruka").innerText="Lozinka mora sadržati barem jedan poseban znak (!@#$%^&*()_+-=[]{};'\\|,.<>/?).",document.getElementById("poruka").style.display="block",!1):(document.getElementById("poruka").innerText="Lozinka mora sadržati barem jedno veliko slovo.",document.getElementById("poruka").style.display="block",!1):(document.getElementById("poruka").innerText="Lozinka mora sadržati barem jedno malo slovo.",document.getElementById("poruka").style.display="block",!1)}function proveriKorisnickoIme(e){return e.length<5?(document.getElementById("poruka").innerText="Korisničko ime mora imati barem 5 karaktera.",document.getElementById("poruka").style.display="block",!1):!["admin","root","guest"].includes(e.toLowerCase())||(document.getElementById("poruka").innerText="Korisničko ime je rezervisano. Molimo vas, izaberite drugo.",document.getElementById("poruka").style.display="block",!1)}document.getElementById("forma-registracija").addEventListener("submit",function(e){e.preventDefault();let i=document.getElementById("korisnicko_ime").value,a=document.getElementById("lozinka").value,t=document.getElementById("email").value,n=document.getElementById("broj_telefona").value;proveriLozinku(a)&&proveriKorisnickoIme(i)&&proveriEmail(t)&&proveriBrojTelefona(n)&&(console.log("Korisničko ime:",i),console.log("Lozinka:",a),console.log("Email:",t),console.log("Broj telefona:",n),document.getElementById("poruka").innerText="Uspesno ste se registrovali!",document.getElementById("poruka").style.display="block",document.getElementById("forma-registracija").reset())}),prikaziProizvode();
